import streamlit as st

st.set_page_config(page_title="Quiz: Παράκτια Διάβρωση", page_icon="🌊", layout="centered")

st.title("🌊 Quiz: Παράκτια Διάβρωση")
st.markdown("Απάντησε στις ερωτήσεις και μάθε περισσότερα για την παράκτια διάβρωση!")

# Ερωτήσεις κουίζ
quiz = [
    {
        "question": "1. Τι είναι η παράκτια διάβρωση;",
        "type": "radio",
        "options": [
            "Η καταστροφή της ακτής λόγω φυσικών φαινομένων",
            "Η δημιουργία παραλιών από τον άνθρωπο",
            "Η κατασκευή κτιρίων στην παραλία"
        ],
        "answer": 0,
        "explanation": "Η παράκτια διάβρωση είναι η σταδιακή καταστροφή της ακτής από κύματα, ρεύματα και ανθρώπινες δραστηριότητες."
    },
    {
        "question": "2. Ποια γωνία πρόσκρουσης των κυμάτων προκαλεί τη μεγαλύτερη διάβρωση;",
        "type": "radio",
        "options": ["0°", "45°", "90°"],
        "answer": 0,
        "explanation": "Η γωνία 0° (κάθετη πρόσκρουση) προκαλεί τη μεγαλύτερη φθορά."
    },
    {
        "question": "3. Ποιες από τις παρακάτω είναι αρνητικές ανθρώπινες παρεμβάσεις; (επιλέξτε όλες τις σωστές)",
        "type": "checkbox",
        "options": [
            "Καταστροφή βλάστησης",
            "Κατασκευή κτιρίων στην ακτή",
            "Φύτευση φυτών",
            "Χρήση κυματοθραυστών"
        ],
        "answer": [0, 1],
        "explanation": "Η καταστροφή βλάστησης και η αυθαίρετη δόμηση στην ακτή επιδεινώνουν τη διάβρωση."
    },
    {
        "question": "4. Πώς βοηθά η βλάστηση στην προστασία της ακτής;",
        "type": "radio",
        "options": [
            "Μειώνει τη βροχή",
            "Συγκρατεί το έδαφος και μειώνει τα κύματα",
            "Αυξάνει την αλατότητα"
        ],
        "answer": 1,
        "explanation": "Η βλάστηση συγκρατεί το έδαφος και απορροφά την ενέργεια των κυμάτων."
    },
    {
        "question": "5. Ποιο είδος εδάφους διαβρώνεται ευκολότερα;",
        "type": "radio",
        "options": ["Πηλός", "Βράχος", "Άμμος", "Χαλίκι"],
        "answer": 2,
        "explanation": "Η άμμος είναι το πιο ευάλωτο υλικό στη διάβρωση."
    },
    {
        "question": "6. Πόσο μειώνει η βλάστηση τη διάβρωση σύμφωνα με το μοντέλο;",
        "type": "radio",
        "options": ["10%", "30%", "50%", "70%"],
        "answer": 1,
        "explanation": "Στην προσομοίωση, η βλάστηση μειώνει τη διάβρωση κατά 30%."
    },
    {
        "question": "7. Ποια είναι θετική περιβαλλοντική παρέμβαση;",
        "type": "radio",
        "options": [
            "Αποψίλωση παραλίας",
            "Κατασκευή ξενοδοχείου πάνω στην ακτογραμμή",
            "Φύτευση κατάλληλης βλάστησης"
        ],
        "answer": 2,
        "explanation": "Η φύτευση βοηθά στη σταθερότητα της ακτής."
    },
    {
        "question": "8. Ποιος παράγοντας *δεν* επηρεάζει άμεσα τον ρυθμό διάβρωσης;",
        "type": "radio",
        "options": [
            "Ύψος κύματος",
            "Χρώμα της άμμου",
            "Γωνία πρόσκρουσης",
            "Τύπος εδάφους"
        ],
        "answer": 1,
        "explanation": "Το χρώμα της άμμου δεν σχετίζεται με τη διάβρωση."
    },
    {
        "question": "9. Ποια μέτρα μειώνουν τη διάβρωση; (επιλέξτε όλες τις σωστές)",
        "type": "checkbox",
        "options": [
            "Αναχώματα",
            "Κυματοθραύστες",
            "Καθαρισμός παραλίας από σκουπίδια",
            "Καταστροφή θινών"
        ],
        "answer": [0, 1, 2],
        "explanation": "Τα τεχνικά έργα και η περιβαλλοντική φροντίδα βοηθούν στη μείωση της διάβρωσης."
    },
    {
        "question": "10. Ποια ανθρώπινη δραστηριότητα αυξάνει τη διάβρωση;",
        "type": "radio",
        "options": [
            "Διατήρηση φυσικής βλάστησης",
            "Κατασκευή δρόμων δίπλα στην ακτή",
            "Απαγόρευση πρόσβασης σε προστατευμένες περιοχές"
        ],
        "answer": 1,
        "explanation": "Η οδοποιία κοντά στην ακτή διαταράσσει τη σταθερότητα."
    },
    {
        "question": "11. Ποια είναι η βασική αιτία διάβρωσης;",
        "type": "radio",
        "options": [
            "Κύματα",
            "Αιολική ενέργεια",
            "Ανακύκλωση",
            "Ηλιοφάνεια"
        ],
        "answer": 0,
        "explanation": "Η ενέργεια των κυμάτων προκαλεί μετακίνηση υλικών και φθορά."
    },
    {
        "question": "12. Τι συμβαίνει όταν αυξάνεται η γωνία πρόσκρουσης (π.χ. 90°);",
        "type": "radio",
        "options": [
            "Μειώνεται η κάθετη διάβρωση",
            "Αυξάνεται η κάθετη διάβρωση",
            "Καταρρέουν τα κύματα"
        ],
        "answer": 0,
        "explanation": "Τα κύματα κινούνται πιο παράλληλα, άρα μειώνεται η φθορά κάθετα."
    },
    {
        "question": "13. Η θετική διαχείριση της ακτής περιλαμβάνει:",
        "type": "radio",
        "options": [
            "Αυθαίρετη δόμηση",
            "Προστασία φυσικών περιοχών",
            "Αύξηση επισκεψιμότητας"
        ],
        "answer": 1,
        "explanation": "Η προστασία περιοχών και ενημέρωση βοηθούν τη βιωσιμότητα."
    },
    {
        "question": "14. Πώς επηρεάζει η συχνότητα των κυμάτων τη διάβρωση;",
        "type": "radio",
        "options": [
            "Δεν έχει επίδραση",
            "Όσο περισσότερα κύματα, τόσο μικρότερη η διάβρωση",
            "Όσο περισσότερα κύματα, τόσο μεγαλύτερη η διάβρωση"
        ],
        "answer": 2,
        "explanation": "Η υψηλή συχνότητα κυμάτων αυξάνει τη φθορά."
    },
    {
        "question": "15. Ποιο από τα παρακάτω δεν είναι προστατευτικό μέτρο;",
        "type": "radio",
        "options": [
            "Τεχνητή παραλία",
            "Αναχώματα",
            "Κατασκευή πολυκατοικίας",
            "Κυματοθραύστες"
        ],
        "answer": 2,
        "explanation": "Η κατασκευή πολυκατοικιών μπορεί να επιδεινώσει το πρόβλημα."
    }
]

user_answers = []
submitted = st.button("Υποβολή απαντήσεων")

# Καταγραφή απαντήσεων πριν την υποβολή
for i, q in enumerate(quiz):
    st.markdown(f"### {q['question']}")
    if q["type"] == "radio":
        ans = st.radio("Επιλογή:", q["options"], key=i)
        user_answers.append(ans)
    elif q["type"] == "checkbox":
        ans = st.multiselect("Επιλογές:", q["options"], key=i)
        user_answers.append(ans)

# Υπολογισμός αποτελέσματος
if submitted:
    st.subheader("📊 Αποτελέσματα:")
    score = 0
    for i, q in enumerate(quiz):
        st.markdown(f"**{q['question']}**")
        if q["type"] == "radio":
            correct = q["options"][q["answer"]]
            is_correct = user_answers[i] == correct
            if is_correct:
                score += 1
            st.markdown(f"- Η απάντησή σου: {user_answers[i]}")
            st.markdown(f"- ✅ Σωστή απάντηση: {correct}")
        elif q["type"] == "checkbox":
            correct_set = set([q["options"][j] for j in q["answer"]])
            user_set = set(user_answers[i])
            is_correct = user_set == correct_set
            if is_correct:
                score += 1
            st.markdown(f"- Η απάντησή σου: {', '.join(user_answers[i])}")
            st.markdown(f"- ✅ Σωστές απαντήσεις: {', '.join(correct_set)}")
        st.markdown(f"ℹ️ **Επεξήγηση:** {q['explanation']}")
        st.markdown("---")

    st.success(f"🎉 Το τελικό σου σκορ: **{score} / {len(quiz)}**")

st.markdown("---")
st.caption("Δημιουργήθηκε για εκπαιδευτική χρήση από τον/την εκπαιδευτικό σας 👩‍🏫")
