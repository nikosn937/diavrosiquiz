import streamlit as st
import pandas as pd

st.set_page_config(page_title="Κουίζ: Παράκτια Διάβρωση", page_icon="🌊")
st.title("🌊 Κουίζ: Παράκτια Διάβρωση")
st.markdown("Απάντησε στις ερωτήσεις και μάθε περισσότερα για τη διάβρωση των ακτών!")

questions = [
    {
        "question": "Τι είναι η παράκτια διάβρωση;",
        "type": "radio",
        "options": [
            "Η δημιουργία παραλιών από τον άνεμο",
            "Η μετακίνηση υλικών στην παραλία από τα κύματα",
            "Η καταστροφή της ακτής από τη θάλασσα",
            "Η αύξηση της θερμοκρασίας των ακτών"
        ],
        "answer": "Η καταστροφή της ακτής από τη θάλασσα",
        "explanation": "Η παράκτια διάβρωση είναι η φθορά και υποχώρηση της ακτής λόγω της δράσης των κυμάτων και άλλων παραγόντων."
    },
    {
        "question": "Ποιος παράγοντας ΔΕΝ επηρεάζει την παράκτια διάβρωση;",
        "type": "radio",
        "options": [
            "Η βλάστηση κοντά στην ακτή",
            "Το υλικό του εδάφους",
            "Η ώρα της ημέρας",
            "Η συχνότητα των κυμάτων"
        ],
        "answer": "Η ώρα της ημέρας",
        "explanation": "Η ώρα της ημέρας δεν έχει άμεση επίδραση στη διάβρωση. Αντίθετα, το έδαφος, τα κύματα και η βλάστηση είναι σημαντικοί παράγοντες."
    },
    {
        "question": "Πώς επηρεάζει η βλάστηση την παράκτια διάβρωση;",
        "type": "radio",
        "options": [
            "Τη μειώνει",
            "Δεν την επηρεάζει",
            "Την αυξάνει",
            "Την εξαφανίζει"
        ],
        "answer": "Τη μειώνει",
        "explanation": "Η βλάστηση σταθεροποιεί το έδαφος με τις ρίζες και μειώνει τη διάβρωση."
    },
    {
        "question": "Επίλεξε όλους τους παράγοντες που αυξάνουν τη διάβρωση:",
        "type": "checkbox",
        "options": [
            "Καταστροφή βλάστησης",
            "Κυματοθραύστες",
            "Αυθαίρετες κατασκευές κοντά στην ακτή",
            "Τεχνητή αναδάσωση"
        ],
        "answer": ["Καταστροφή βλάστησης", "Αυθαίρετες κατασκευές κοντά στην ακτή"],
        "explanation": "Οι ανθρώπινες επεμβάσεις όπως η καταστροφή βλάστησης και οι κατασκευές κοντά στην ακτή εντείνουν το πρόβλημα της διάβρωσης."
    },
    {
        "question": "Ποια είναι η κύρια αιτία παράκτιας διάβρωσης;",
        "type": "radio",
        "options": [
            "Οι σεισμοί",
            "Τα κύματα",
            "Ο άνεμος",
            "Η ανθρώπινη παρουσία μόνο"
        ],
        "answer": "Τα κύματα",
        "explanation": "Η κύρια φυσική αιτία διάβρωσης είναι η συνεχής δράση των κυμάτων πάνω στην ακτή."
    },
    {
        "question": "Ποια μέτρα μειώνουν τη διάβρωση;",
        "type": "checkbox",
        "options": [
            "Κατασκευή κυματοθραυστών",
            "Φύτευση βλάστησης",
            "Κατεδάφιση παραδοσιακών σπιτιών",
            "Περιορισμός πρόσβασης σε ευαίσθητες περιοχές"
        ],
        "answer": ["Κατασκευή κυματοθραυστών", "Φύτευση βλάστησης", "Περιορισμός πρόσβασης σε ευαίσθητες περιοχές"],
        "explanation": "Τα σωστά μέτρα διαχείρισης περιλαμβάνουν φυσική προστασία, φύτευση και περιορισμό πρόσβασης."
    },
    {
        "question": "Ποιος τύπος εδάφους διαβρώνεται πιο εύκολα;",
        "type": "radio",
        "options": [
            "Άμμος",
            "Πηλός",
            "Βράχος",
            "Χαλίκι"
        ],
        "answer": "Άμμος",
        "explanation": "Η άμμος είναι πιο χαλαρό υλικό και παρασύρεται εύκολα από τα κύματα."
    },
    {
        "question": "Πώς επηρεάζει η γωνία πρόσπτωσης των κυμάτων τη διάβρωση;",
        "type": "radio",
        "options": [
            "Όσο πιο κάθετα, τόσο μεγαλύτερη διάβρωση",
            "Η γωνία δεν παίζει ρόλο",
            "Όσο πιο λοξά, τόσο μεγαλύτερη διάβρωση",
            "Παράλληλα κύματα προκαλούν περισσότερη διάβρωση"
        ],
        "answer": "Όσο πιο κάθετα, τόσο μεγαλύτερη διάβρωση",
        "explanation": "Όταν τα κύματα χτυπούν κάθετα, μεταφέρουν περισσότερη ενέργεια στην ακτή."
    },
    {
        "question": "Ποια από τις παρακάτω επιλογές ΔΕΝ αποτελεί θετική διαχείριση;",
        "type": "radio",
        "options": [
            "Περιορισμός πρόσβασης",
            "Ενημέρωση επισκεπτών",
            "Κατασκευή πολυκατοικίας στην ακτή",
            "Φυσική προστασία με βράχια"
        ],
        "answer": "Κατασκευή πολυκατοικίας στην ακτή",
        "explanation": "Η κατασκευή μεγάλων κτιρίων κοντά στην ακτή μπορεί να εντείνει τη διάβρωση."
    },
    {
        "question": "Ποια είναι τα αποτελέσματα της διάβρωσης;",
        "type": "checkbox",
        "options": [
            "Καταστροφή υποδομών",
            "Δημιουργία δασών",
            "Απώλεια παραλιών",
            "Προστασία ακτών"
        ],
        "answer": ["Καταστροφή υποδομών", "Απώλεια παραλιών"],
        "explanation": "Η διάβρωση καταστρέφει δρόμους, σπίτια, τουριστικές περιοχές και παραλίες."
    },
    {
        "question": "Ποια από τις παρακάτω ενέργειες είναι περιβαλλοντικά σωστή;",
        "type": "radio",
        "options": [
            "Χρήση χημικών καθαριστικών στη θάλασσα",
            "Καταστροφή φυτών για να καθαρίσει η θέα",
            "Φύτευση τοπικής βλάστησης",
            "Άμμος από άλλες περιοχές στην παραλία"
        ],
        "answer": "Φύτευση τοπικής βλάστησης",
        "explanation": "Η τοπική βλάστηση προστατεύει το οικοσύστημα και σταθεροποιεί την ακτή."
    },
    {
        "question": "Ποιος είναι ο ρόλος των κυματοθραυστών;",
        "type": "radio",
        "options": [
            "Αυξάνουν τα κύματα",
            "Απορροφούν την ενέργεια των κυμάτων",
            "Μετακινούν την παραλία",
            "Δεν έχουν καμία χρήση"
        ],
        "answer": "Απορροφούν την ενέργεια των κυμάτων",
        "explanation": "Οι κυματοθραύστες μειώνουν τη δύναμη των κυμάτων πριν φτάσουν στην ακτή."
    },
    {
        "question": "Η τεχνητή παραλία είναι:",
        "type": "radio",
        "options": [
            "Μια παραλία που δημιουργήθηκε με φυσικό τρόπο",
            "Μια παραλία με τεχνητά υλικά για προστασία",
            "Παραλία με πολλά κτίρια",
            "Μια ονομασία για εικονική παραλία"
        ],
        "answer": "Μια παραλία με τεχνητά υλικά για προστασία",
        "explanation": "Η τεχνητή παραλία χρησιμοποιείται για να απορροφά ενέργεια κυμάτων και να μειώνει τη διάβρωση."
    },
    {
        "question": "Ποια από τις παρακάτω πρακτικές αυξάνει τη βιωσιμότητα των ακτών;",
        "type": "radio",
        "options": [
            "Αποψίλωση δέντρων",
            "Εγκατάσταση βιολογικών φίλτρων",
            "Πλακόστρωση ολόκληρης της παραλίας",
            "Συχνή καθαριότητα με μηχανήματα"
        ],
        "answer": "Εγκατάσταση βιολογικών φίλτρων",
        "explanation": "Τα βιολογικά φίλτρα μειώνουν τη ρύπανση και βοηθούν τη βιώσιμη διαχείριση των ακτών."
    }
]

user_answers = []
submitted = st.button("✅ Υποβολή απαντήσεων")

if not submitted:
    for i, q in enumerate(questions):
        st.subheader(f"Ερώτηση {i + 1}:")
        if q["type"] == "radio":
            answer = st.radio(q["question"], q["options"], key=i)
        elif q["type"] == "checkbox":
            answer = st.checkbox(q["question"], key=i)
            answer = st.multiselect("Επιλογές:", q["options"], key=f"multi_{i}")
        user_answers.append(answer)
else:
    score = 0
    results = []
    for i, q in enumerate(questions):
        st.subheader(f"Ερώτηση {i + 1}:")
        st.markdown(f"**Ερώτηση:** {q['question']}")
        st.markdown(f"**Η απάντησή σου:** {user_answers[i]}")
        st.markdown(f"**Σωστή απάντηση:** {q['answer']}")
        st.markdown(f"ℹ️ {q['explanation']}")

        correct = False
        if q["type"] == "radio" and user_answers[i] == q["answer"]:
            correct = True
        elif q["type"] == "checkbox" and set(user_answers[i]) == set(q["answer"]):
            correct = True

        results.append({"Ερώτηση": q['question'], "Απάντηση": user_answers[i], "Σωστό": correct})
        if correct:
            score += 1

    st.success(f"Το τελικό σου σκορ είναι: {score} / {len(questions)}")

    df = pd.DataFrame(results)
    csv = df.to_csv(index=False).encode('utf-8')
    st.download_button("⬇️ Κατέβασε τις απαντήσεις σου", csv, "απαντήσεις.csv", "text/csv")

st.markdown("---")
st.caption("Δημιουργήθηκε για εκπαιδευτική χρήση από τον/την εκπαιδευτικό σας 👩‍🏫")
